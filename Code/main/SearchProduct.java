package com.reroute.main;

import javax.swing.JFrame;
import javax.swing.JTextField;
import com.reroute.datasource.Product;
import com.reroute.datasource.ProductDao;
import com.reroute.datasource.ProductImpl;
import com.reroute.tools.NumericUtil;

import java.awt.BorderLayout;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.DefaultComboBoxModel;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.awt.event.ActionEvent;
import java.awt.TextArea;
import java.awt.Toolkit;
import java.awt.Dimension;
import java.awt.FlowLayout;
import javax.swing.BoxLayout;
import java.awt.Color;
import java.awt.Font;
import javax.swing.SwingConstants;

import org.apache.lucene.search.spell.PlainTextDictionary;
import org.apache.lucene.search.spell.SpellChecker;
import org.apache.lucene.store.Directory;
import java.awt.GridLayout;
import javax.swing.GroupLayout;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JSplitPane;
import javax.swing.ImageIcon;
import java.awt.SystemColor;

@SuppressWarnings("serial")
public class SearchProduct extends JFrame{

	private String[] progress = new String[]{"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"};
	private LocalDb localdb = null;
	public JFrame frmSearchProduct;
	private ProductDao productdao = new ProductImpl();
	/*Constant variables*/
	private String[] prodSchedOptions = new String[]{"1","2","3","4","5","6","7","&"};

	/*Text fields variables declaration*/
	private JTextField edtProductID = new JTextField();

	private JTextField edtProductName1 = new JTextField();
	private JTextField edtProductStrength = new JTextField();
	private JTextField edtProductPack = new JTextField();
	private TextArea edtProductDescrip = new TextArea();

	/*Combo variables*/
	private JComboBox<String> cmbProductSched = new JComboBox<String>();

	/*Grid list declaration*/
	java.awt.List listGrid = null;

	/*variables*/
	private String name1;
	//private String name2;
	//private String name3;
	//private String name4;
	//private String name5;
	private int id = 0;

	private Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
	private int width = 0;
	private int height = 0;
	private JTextField edtTimeExecuted;

	private List<Product> aProductList = null;

	private NumericUtil numericutil = new NumericUtil();
	private DateFormat dateFormat = new SimpleDateFormat("mm:ss");
	private Date startRunningTime = null;
	private Date endRunningTime = null;

	/**
	 * Create the application.
	 */
	public SearchProduct() {
		initialize();
	}

	/**
	 * Initialize the contents of the frame.
	 */
	public void initialize() {
		frmSearchProduct = new JFrame();
		frmSearchProduct.setBounds(100, 100, 450, 450);
		frmSearchProduct.setTitle("Smart Search - Search Product");
		width = (int) screenSize.getWidth();
		height = (int) screenSize.getHeight();
		frmSearchProduct.setSize(1000, 860);
		frmSearchProduct.setExtendedState(JFrame.MAXIMIZED_BOTH);
		frmSearchProduct.setLocationRelativeTo(null);
		frmSearchProduct.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
		frmSearchProduct.getContentPane().setLayout(new BorderLayout(0, 0));

		/*Panels declaration*/
		JPanel panel = new JPanel();
		frmSearchProduct.getContentPane().add(panel);
		panel.setLayout(new BorderLayout(0, 0));

		JPanel pnlNorth = new JPanel();
		pnlNorth.setBackground(Color.WHITE);
		panel.add(pnlNorth, BorderLayout.NORTH);
		pnlNorth.setLayout(new BorderLayout(0, 0));

		JLabel lblEmpty = new JLabel(" ");
		lblEmpty.setFont(new Font("Segoe UI", Font.PLAIN, 20));
		pnlNorth.add(lblEmpty, BorderLayout.NORTH);

		JPanel pnlCenter = new JPanel();
		panel.add(pnlCenter, BorderLayout.CENTER);
		pnlCenter.setLayout(new BorderLayout(0, 0));

		JPanel pnlSubNorth = new JPanel();
		pnlCenter.add(pnlSubNorth, BorderLayout.NORTH);
		pnlSubNorth.setLayout(new BorderLayout(0, 0));

		JPanel panel_1 = new JPanel();
		panel_1.setBackground(Color.WHITE);
		pnlSubNorth.add(panel_1, BorderLayout.NORTH);
		panel_1.setLayout(new BorderLayout(0, 0));

		JPanel pnlWest = new JPanel();
		pnlWest.setBackground(Color.WHITE);
		FlowLayout flowLayout = (FlowLayout) pnlWest.getLayout();
		flowLayout.setAlignment(FlowLayout.LEFT);
		panel_1.add(pnlWest, BorderLayout.WEST);

		JPanel panel_2 = new JPanel();
		pnlWest.add(panel_2);
		panel_2.setLayout(new BoxLayout(panel_2, BoxLayout.Y_AXIS));

		JPanel panel_4 = new JPanel();
		panel_4.setBackground(Color.WHITE);
		FlowLayout flowLayout_3 = (FlowLayout) panel_4.getLayout();
		flowLayout_3.setAlignment(FlowLayout.LEFT);
		panel_2.add(panel_4);

		JLabel lblKeywordSearch = new JLabel("Keyword search : ");
		lblKeywordSearch.setHorizontalAlignment(SwingConstants.LEFT);
		lblKeywordSearch.setFont(new Font("Segoe UI", Font.PLAIN, 30));
		lblKeywordSearch.setForeground(new Color(220, 20, 60));
		panel_4.add(lblKeywordSearch);

		JPanel panel_5 = new JPanel();
		panel_5.setBackground(Color.WHITE);
		panel_2.add(panel_5);
		edtProductName1.setFont(new Font("Segoe UI", Font.PLAIN, 20));
		panel_5.add(edtProductName1);
		edtProductName1.setColumns(20);
		//----------------------------------------------
		JButton btnSearchName = new JButton("Submit");
		btnSearchName.setIcon(new ImageIcon("C:\\Users\\Jocelyn\\Documents\\Catura\\Java\\ReRoute\\ReRoute\\submit_send_continue.png"));
		btnSearchName.setFont(new Font("Segoe UI", Font.PLAIN, 20));
		btnSearchName.setBackground(SystemColor.activeCaptionBorder);
		panel_5.add(btnSearchName);

		btnSearchName.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				/*Destroying Grid list for new search*/
				listGrid.removeAll();
				//cleanTextField();
				//======
				name1 = edtProductName1.getText().toUpperCase();
				String[] str = name1.split(" |-|,\\W |_|,\\W |,|,\\W |\\.|,\\W |:|,\\W |;|,\\W",5);
				if(name1.equals("")){
					JOptionPane.showMessageDialog(null, "Keyword cannot be empty!");
				}else{
					if(name1.length()<3){
						JOptionPane.showMessageDialog(null, "Product name must be at least 3 characters long");
					}
					else{
						aProductList = new ArrayList<Product>();
						//get time here
						startRunningTime = new Date();
						aProductList = productdao.getProductNameLike(str);
						//aProductList = productdao.getProductNameLike1(name1);
						endRunningTime = new Date();

						if(aProductList.size() > 0){
							displayValues(aProductList.get(0));
							for(int i=0;(i< 20 && i<aProductList.size());++i){
								listGrid.add(aProductList.get(i).getProductName()+" - "+ aProductList.get(i).getProductPack());
								//NORVASC,NEEDLE NOVOFINE,NUROFEN
							}
						}
						else{
							JOptionPane.showMessageDialog(null, "Nothing found");
						}

						edtTimeExecuted.setText(getSearchRunningTime()+"ms");
						//
					}
				}
			}
		});

		JPanel pnlEast = new JPanel();
		pnlEast.setBackground(Color.WHITE);
		FlowLayout flowLayout_1 = (FlowLayout) pnlEast.getLayout();
		flowLayout_1.setAlignment(FlowLayout.LEFT);
		panel_1.add(pnlEast, BorderLayout.EAST);

		JPanel panel_3 = new JPanel();
		panel_3.setBackground(Color.WHITE);
		pnlEast.add(panel_3);
		panel_3.setLayout(new BoxLayout(panel_3, BoxLayout.Y_AXIS));

		JPanel panel_6 = new JPanel();
		panel_6.setBackground(Color.WHITE);
		FlowLayout flowLayout_2 = (FlowLayout) panel_6.getLayout();
		flowLayout_2.setAlignment(FlowLayout.LEFT);
		panel_3.add(panel_6);

		JLabel lblIdSearch = new JLabel("ID Search : ");
		lblIdSearch.setForeground(new Color(220, 20, 60));
		lblIdSearch.setFont(new Font("Segoe UI", Font.PLAIN, 30));
		lblIdSearch.setHorizontalAlignment(SwingConstants.LEFT);
		panel_6.add(lblIdSearch);

		JPanel panel_7 = new JPanel();
		panel_7.setBackground(Color.WHITE);
		panel_3.add(panel_7);
		edtProductID.setFont(new Font("Segoe UI", Font.PLAIN, 20));
		panel_7.add(edtProductID);
		edtProductID.setEnabled(true);
		edtProductID.setColumns(20);
		//----------------------------------------------
		JButton btnSearchID = new JButton("Submit");
		btnSearchID.setBackground(SystemColor.activeCaptionBorder);
		btnSearchID.setIcon(new ImageIcon("C:\\Users\\Jocelyn\\Documents\\Catura\\Java\\ReRoute\\ReRoute\\submit_send_continue.png"));
		btnSearchID.setFont(new Font("Segoe UI", Font.PLAIN, 20));
		panel_7.add(btnSearchID);
		btnSearchID.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				//cleanTextField();
				if(edtProductID.getText().equals("")){
					JOptionPane.showMessageDialog(null, "ID cannot be empty!");
				}
				else{
					id = numericutil.str2Int(edtProductID.getText());
					startRunningTime = new Date();
					Product product = productdao.getProductOnId(id);
					endRunningTime = new Date();
					if(product != null){
						displayValues(product);
					}
					else{
						JOptionPane.showMessageDialog(null, "Nothing found");
					}
					edtTimeExecuted.setText(getSearchRunningTime()+"ms");
				}

			}
		});

																																																																																																																																																																														JPanel pnlSubCenter = new JPanel();
																																																																																																																																																																														pnlCenter.add(pnlSubCenter);
																																																																																																																																																																														pnlSubCenter.setBackground(Color.WHITE);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							pnlSubCenter.setLayout(new BoxLayout(pnlSubCenter, BoxLayout.Y_AXIS));

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							JPanel pnlDesc = new JPanel();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							FlowLayout flowLayout_4 = (FlowLayout) pnlDesc.getLayout();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							flowLayout_4.setAlignment(FlowLayout.LEFT);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							pnlSubCenter.add(pnlDesc);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							pnlDesc.setBackground(Color.WHITE);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							JLabel lblProductDescription = new JLabel("Product Description :");
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							lblProductDescription.setPreferredSize(new Dimension(200, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							pnlDesc.add(lblProductDescription);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							lblProductDescription.setFont(new Font("Segoe UI", Font.PLAIN, 15));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							edtProductDescrip.setPreferredSize(new Dimension(300, 100));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							pnlDesc.add(edtProductDescrip);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												JPanel pnlSched = new JPanel();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												FlowLayout flowLayout_5 = (FlowLayout) pnlSched.getLayout();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												flowLayout_5.setAlignment(FlowLayout.LEFT);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												pnlSubCenter.add(pnlSched);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												pnlSched.setBackground(Color.WHITE);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												JLabel lblProductSched = new JLabel("Product Schedule    :");
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												lblProductSched.setPreferredSize(new Dimension(200, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												pnlSched.add(lblProductSched);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												lblProductSched.setFont(new Font("Segoe UI", Font.PLAIN, 15));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												cmbProductSched.setPreferredSize(new Dimension(135, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												pnlSched.add(cmbProductSched);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												cmbProductSched.setFont(new Font("Segoe UI", Font.PLAIN, 20));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												cmbProductSched.setModel(new DefaultComboBoxModel<String>(prodSchedOptions));

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												JPanel pnlPack = new JPanel();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												FlowLayout flowLayout_6 = (FlowLayout) pnlPack.getLayout();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												flowLayout_6.setAlignment(FlowLayout.LEFT);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												pnlSubCenter.add(pnlPack);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																												pnlPack.setBackground(Color.WHITE);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		JLabel lblProductPack = new JLabel("Product Pack :");
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		lblProductPack.setPreferredSize(new Dimension(200, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		pnlPack.add(lblProductPack);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		lblProductPack.setFont(new Font("Segoe UI", Font.PLAIN, 15));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		edtProductPack.setPreferredSize(new Dimension(300, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		pnlPack.add(edtProductPack);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		edtProductPack.setFont(new Font("Segoe UI", Font.PLAIN, 15));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		edtProductPack.setColumns(10);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								JPanel pnlStrength = new JPanel();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								FlowLayout flowLayout_7 = (FlowLayout) pnlStrength.getLayout();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								flowLayout_7.setAlignment(FlowLayout.LEFT);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								pnlSubCenter.add(pnlStrength);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								pnlStrength.setBackground(Color.WHITE);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						JLabel lblProductStrength = new JLabel("Product Strength :");
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						lblProductStrength.setPreferredSize(new Dimension(200, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						pnlStrength.add(lblProductStrength);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						lblProductStrength.setFont(new Font("Segoe UI", Font.PLAIN, 15));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						edtProductStrength.setPreferredSize(new Dimension(300, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						pnlStrength.add(edtProductStrength);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						edtProductStrength.setFont(new Font("Segoe UI", Font.PLAIN, 15));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																						edtProductStrength.setColumns(10);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														JPanel pnlSearchList = new JPanel();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														pnlSearchList.setMinimumSize(new Dimension(1000, 10));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														FlowLayout fl_pnlSearchList = (FlowLayout) pnlSearchList.getLayout();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														pnlSubCenter.add(pnlSearchList);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														pnlSearchList.setBackground(Color.WHITE);

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				JLabel lblNameSearchResults = new JLabel("Name search results:");
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				lblNameSearchResults.setForeground(new Color(255, 0, 0));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				pnlSearchList.add(lblNameSearchResults);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				lblNameSearchResults.setForeground(new Color(220, 20, 60));

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				lblNameSearchResults.setPreferredSize(new Dimension(200, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				lblNameSearchResults.setFont(new Font("Segoe UI", Font.PLAIN, 20));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								listGrid = new java.awt.List();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								pnlSubCenter.add(listGrid);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								listGrid.setSize(new Dimension(300, 500));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								listGrid.setMinimumSize(new Dimension(1000, 200000));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								listGrid.setMaximumSize(new Dimension(320000, 320000));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								listGrid.setPreferredSize(new Dimension(500, 200000));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								//----------------------------------------------
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								listGrid.addMouseListener(new java.awt.event.MouseAdapter() {
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									public void mouseClicked(final java.awt.event.MouseEvent e) {
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																										/*cleaning textfield except Grid for new search*/
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																										cleanTextFieldExceptGrid();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																										displayValues(aProductList.get(listGrid.getSelectedIndex()));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								}
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								});

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								JPanel pnlTime = new JPanel();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								FlowLayout flowLayout_8 = (FlowLayout) pnlTime.getLayout();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								flowLayout_8.setAlignment(FlowLayout.LEFT);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								pnlSubCenter.add(pnlTime);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								pnlTime.setBackground(Color.WHITE);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								JLabel lblTimeExecuted = new JLabel("Time Executed : ");
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								lblTimeExecuted.setPreferredSize(new Dimension(200, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								pnlTime.add(lblTimeExecuted);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								lblTimeExecuted.setFont(new Font("Segoe UI", Font.PLAIN, 15));

																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				edtTimeExecuted = new JTextField();
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				edtTimeExecuted.setPreferredSize(new Dimension(300, 25));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				pnlTime.add(edtTimeExecuted);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				edtTimeExecuted.setFont(new Font("Segoe UI", Font.PLAIN, 15));
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				edtTimeExecuted.setColumns(10);
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																				edtTimeExecuted.setEnabled(false);

		JPanel pnlSouth = new JPanel();
		pnlSouth.setBackground(Color.WHITE);
		panel.add(pnlSouth, BorderLayout.SOUTH);
		pnlSouth.setLayout(new BoxLayout(pnlSouth, BoxLayout.Y_AXIS));

		JPanel panel_10 = new JPanel();
		pnlSouth.add(panel_10);
		panel_10.setBackground(Color.WHITE);

						//----------------------------------------------
						JButton btnReset = new JButton("    Reset     ");
						btnReset.setBackground(SystemColor.activeCaptionBorder);
						btnReset.setIcon(new ImageIcon("C:\\Users\\Jocelyn\\Documents\\Catura\\Java\\ReRoute\\ReRoute\\update_data_white.png"));
						panel_10.add(btnReset);
						btnReset.setFont(new Font("Segoe UI", Font.PLAIN, 20));

												JLabel lblNewLabel = new JLabel("                      ");
												panel_10.add(lblNewLabel);
												lblNewLabel.setFont(new Font("Segoe UI", Font.PLAIN, 20));

																				//----------------------------------------------

																				JButton btnCancel = new JButton("Return");
																				btnCancel.setBackground(SystemColor.activeCaptionBorder);
																				btnCancel.setIcon(new ImageIcon("C:\\Users\\Jocelyn\\Documents\\Catura\\Java\\ReRoute\\ReRoute\\done_back_previous_icon.png"));
																				panel_10.add(btnCancel);
																				btnCancel.setFont(new Font("Segoe UI", Font.PLAIN, 20));
																				btnCancel.addActionListener(new ActionListener() {
																					public void actionPerformed(ActionEvent arg0) {
																						frmSearchProduct.dispose();
																						MainMenu menu = new MainMenu();
																						menu.frmMenu.setVisible(true);
																					}
																				});
																				btnReset.addActionListener(new ActionListener() {
																					public void actionPerformed(ActionEvent arg0) {
																						cleanTextField();
																					}
																				});

		JPanel panel_9 = new JPanel();
		pnlSouth.add(panel_9);
		panel_9.setBackground(Color.WHITE);
		panel_9.setLayout(new BoxLayout(panel_9, BoxLayout.Y_AXIS));

								JLabel lblNewLabel_1 = new JLabel("    ");
								panel_9.add(lblNewLabel_1);
								lblNewLabel_1.setFont(new Font("Segoe UI", Font.PLAIN, 20));

								JLabel label = new JLabel("    ");
								panel_9.add(label);
								label.setFont(new Font("Segoe UI", Font.PLAIN, 20));

		//----------------------------------------------
		/*JButton btnSearchReddis = new JButton("Search Reddis");
		btnSearchReddis.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent arg0) {
				listGrid.removeAll()
				localdb = new LocalDb();

				//======
				name1 = edtProductName1.getText().toUpperCase();

				if(name1.equals("")){
					JOptionPane.showMessageDialog(null, "Nothin found.");
				}
				else{
					String productName = "*"+name1+"*";//contain
					aProductList = new ArrayList<Product>();
					//get time here
					startRunningTime = new Date();
					Set<String> list = localdb.findKey(productName);
					endRunningTime = new Date();
					for (String key : list) {
						//System.out.print("Key: "+key+" => ");
						Set<String> members = localdb.getMembers(key);
						//System.out.println(members);

						for (String val : members) {
							int id = numericutil.str2Int(val);
							Product product = productdao.getProductOnId(id);
							aProductList.add(product);
						}
					}

					if(aProductList.size() > 0){
						displayValues(aProductList.get(0));
						for(int i=0;(i< 20 && i < aProductList.size());++i){
							listGrid.add(aProductList.get(i).getProductName()+" - "+ aProductList.get(i).getProductPack());//NORVASC,NEEDLE NOVOFINE,NUROFEN
						}
					}
					//endRunningTime = new Date();
					edtTimeExecuted.setText(getSearchRunningTime()+"ms");
				}
				localdb.close();
			}
		});
		btnSearchReddis.setBounds(489, 93, 116, 23);
		pnlSubCenter.add(btnSearchReddis);*/
	}

	public String getSearchRunningTime(){
		long diff = Math.abs(startRunningTime.getTime() - endRunningTime.getTime());
		long diffSeconds = diff / 1000 % 60;
		long diffMilliseconds = diff / 1 % 60;
		return ""+diffMilliseconds;
	}
	/*Help function to CLEAN all textfields*/
	private void cleanTextField(){
		listGrid.removeAll();
		edtProductID.setText("");
		edtProductName1.setText("");
		//edtProductName2.setText("");
		//edtProductName3.setText("");
		//edtProductName4.setText("");
		//edtProductName5.setText("");
		edtProductStrength.setText("");
		edtProductDescrip.setText("");
		edtProductPack.setText("");
		cmbProductSched.setSelectedIndex(0);
		cmbProductSched.setSelectedIndex(0);
	}

	/*Help function to CLEAN all textfields except on Grid*/
	private void cleanTextFieldExceptGrid(){
		edtProductID.setText("");
		//edtProductName1.setText("");
		//edtProductName1.setText("");
		//edtProductName2.setText("");
		//edtProductName3.setText("");
		//edtProductName4.setText("");
		//edtProductName5.setText("");
		edtProductStrength.setText("");
		edtProductDescrip.setText("");
		edtProductPack.setText("");
		cmbProductSched.setSelectedIndex(0);
		cmbProductSched.setSelectedIndex(0);
	}

	//--------------------------------------
	/*Help function to display details of product with name using Product parameter*/
	private void displayValues(Product pProduct){
		edtProductID.setText(String.valueOf(pProduct.getIdProduct()));
		edtProductStrength.setText(pProduct.getProductStrength());
		edtProductDescrip.setText(pProduct.getProductDescription());
		edtProductPack.setText(pProduct.getProductPack());
		cmbProductSched.setSelectedItem(pProduct.getProductSchedule());
	}
	//--------------------------------------
	private void copyDataFromMainDb(){
		localdb = new LocalDb();
		localdb.deleteAll();
		for(int i=0; i<progress.length;++i){
			System.out.println("=="+(i*100)/36+"%== "+progress[i]);
			List<Product> aProductList = productdao.getProductNameStartWith(progress[i]);
			if(aProductList != null){
				for(int j=0; j< aProductList.size();++j){
					localdb.enqueue(aProductList.get(j).getProductName(),""+aProductList.get(j).getIdProduct());
					//localdb.enqueue(""+aProductList.get(j).getIdProduct(),aProductList.get(j).getProductName());
				}
			}
		}
		System.out.println("===========\nReddis DB size: "+localdb.size());
		localdb.close();
	}

	public void spellCheck(String name) throws IOException, Throwable{
		//spell checker instantiation
		File dir = new File("C:\\Users\\Jocelyn\\Documents\\Catura\\Java\\ReRoute\\ReRoute");
		Directory directory;// = ;//"C:\\Users\\Jocelyn\\Documents\\Catura\\Java\\ReRoute\\ReRoute";
		directory = null;
		SpellChecker sp;
		try {
			sp = new SpellChecker(directory);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			sp = null;
		}

		//index the dictionary
		sp.indexDictionary(new PlainTextDictionary(new File("Dictionary1.txt")));

		//your 'wrong' search
		String search = name;

		//number of suggestions
		final int suggestionNumber = 5;

		//get the suggested words
		String[] suggestions = sp.suggestSimilar(search, suggestionNumber);

		//show the results.
		System.out.println("Your Term:" + search);

		for (String word : suggestions) {
			System.out.println("Did you mean:" + word);
		}
	}
}
